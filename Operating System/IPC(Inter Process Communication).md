# IPC (Inter-Process Communication)

## IPC란?
독립적인 프로세스들 사이에서 서로 데이터를 주고 받는 행위, 또는 그에 대한 방법이나 경로를 뜻한다.
한 마디로 요약하자면 **프로세스들 간의 통신**하는 것을 **IPC**라고 한다.

## IPC 종류

1. 공유 메모리 (Shared Memory)
	- 데이터 자체를 공유하도록 지원하는 설비
	- **프로세스간 메모리 영역을 공유해서 사용**할 수 있도록 허용한다.
	- **프로세스가 공유 메모리 할당을 커널에 요청하면 커널은 해당 프로세스에 메모리 공간을 할당**한다. 이후 어떤 프로세스건 해당 메모리 영역에 접근할 수 있다.
	- 프로세스간 Read, Write를 모두 필요로 할 때 사용한다.
	- 대량의 정보를 다수의 프로세스에게 배포 가능하다.
	- **중개자 없이 곧바로 메모리에 접근할 수 있기 때문에 모든 IPC 중에서 가장 빠르게 작동**할 수 있다.
2. 익명 파이프 (Anonymous PIPE)
	- 일반적인 파이프
	- **통신할 프로세스가 명확하게 알 수 있는 경우**에 사용한다. (부모-자식 or 형제 프로세스 간, 외부 프로세스에서 사용 불가)
	- 파이프는 두 개의 프로세스를 연결하고, 하나의 프로세스는 데이터를 쓰기만, 다른 하나는 데이터를 읽기만 할 수 있다. **한쪽 방향으로만 통신이 가능한 파이프의 특징** 때문에 **반이중(Half-Duplex) 통신**이라고 부르기도 한다.
	- 반이중 통신이기 때문에 프로세스가 읽기/쓰기 통신을 모두 해야한다면 파이프 2개를 만들어야 하므로 구현이 복잡해질 수 있다.

3. 네임드 파이프 (Named PIPE)
	- **전혀 모르는 상태의 프로세스들 사이의 통신**에 사용
	- 익명 파이프의 확장된 상태로 부모 프로세스와 무관한 다른 프로세스도 통신이 가능하다. (이름이 있는 파일 사용, 외부 프로세스와 통신 가능)
	- mkfifo or mknod 함수로 생성
	
4. 소켓 (Socket)
	- Unix 도메인 소켓 또는 IPC 소켓은 동일한 호스트 운영 체제에서 실행되는 프로세스간 데이터를 교환하기 위한 데이터 통신 엔드 포인트이다.
	- 네트워크 소켓 통신을 통해 데이터를 공유한다.
	- 클라이언트와 서버가 소켓을 통해서 통신하는 구조로, **원격에서 프로세스간 데이터를 공유**할 때 사용한다.
	- **전이중(Full Duplex, 양방향) 통신**이 가능하다.
	
5. 메세지 큐 (Message Queue)
	- 입출력 방식은 Named 파이프와 동일하다.
	- 다른점은 메세지 큐는 파이프처럼 데이터의 흐름이 아니라 **메모리 공간**이다. (메모리를 사용한 PIPE)
	- PIPE나 FIFO와는 달리 다수의 프로세스간 메세지를 전달할 수 있다.
	- 사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다.
	- 메세지의 접근을 위해서는 키(key)가 필요하다.

6. 메모리 맵 (Memory Map)
	- 공유 메모리처럼 메모리를 공유해준다.
	- 메모리 맵은 **열린 파일을 메모리에 맵핑시켜서 공유**하는 방식이다. (즉 공유 매개체가 파일 + 메모리)
	- 주로 **파일로 대용량 데이터를 공유해야 할 때 사용**한다.
	- FILE IO가 느릴 때 사용하면 좋다.
	- 대부분 운영체제에서는 프로세스를 실행할 때 실행 파일의 각 세그먼트를 메모리에 사상하기 위해 메모리 맵 파일을 이용한다.
	- **메모리 맵 파일은 파일의 크기를 바꿀 수는 없으며 메모리 맵 파일을 사용하기 이전, 또는 이후에만 파일의 크기를 바꿀 수 있다.**

7. RPC (Remote Procedure Call)
	- RPC 방법은 분산 네트워크 망에서 많이 사용되는 방식이다.
	- 별도의 원격 제어를 위한 코딩 없이 다른 주소 공간에서 함수나 프로시저를 실행할 수 있게하는 프로세스 간 통신 기술이다. 다시 말해, 원격 프로시저 호출을 이용하면 프로그래머는 함수가 실행 프로그램에 로컬 위치에 있든 원격 위치에 있든 동일한 코드를 이용할 수 있다.


이러한 IPC통신에서 프로세스 간 데이터를 **동기화하고 보호**하기 위해 **세마포어**와 **뮤텍스**를 사용한다. (공유된 자원에 한번에 하나의 프로세스만 접근시킬 경우)

## 세마포어 (Semaphore)
- 위의 다른 IPC 설비들이 대부분 프로세스간 메세지 전송을 목적으로 하는 것에 반해, 세마포어는 프로세스간 데이터를 동기화하고 보호하는데 목적을 둔다.
- **공유된 자원에** 여러개의 프로세스가 동시에 접근하면 안되며, **한번에 하나의 프로세스만 접근 가능하도록 할 때 사용**된다.

---

참조

https://dar0m.tistory.com/233







